plugins {
    id 'java-gradle-plugin'
    id 'com.gradle.plugin-publish' version '0.9.7'
    id 'org.shipkit.shipkit-changelog' version '1.2.0'
    id 'org.shipkit.shipkit-auto-version' version '1.2.1'
}

repositories {
    mavenCentral()
}

apply plugin: 'maven-publish'
apply plugin: 'com.gradle.plugin-publish'

group = 'ch.myniva.gradle'

sourceCompatibility = '1.7'
targetCompatibility = '1.7'

dependencies {
    implementation 'com.amazonaws:aws-java-sdk-s3:1.12.296'

    testImplementation 'junit:junit:4.13'
    testImplementation 'org.mockito:mockito-core:2.28.2'
}

gradlePlugin {
    plugins {
        s3BuildCache {
            id = 'ch.myniva.s3-build-cache'
            implementationClass = 'ch.myniva.gradle.caching.s3.AwsS3Plugin'
        }
    }
}

pluginBundle {
    website = 'https://github.com/myniva/gradle-s3-build-cache'
    vcsUrl = 'https://github.com/myniva/gradle-s3-build-cache'
    description = 'An AWS S3 build cache implementation'
    tags = ['build-cache']

    plugins {
        s3BuildCache {
            id = 'ch.myniva.s3-build-cache'
            displayName = 'AWS S3 build cache'
        }
    }
}
